{"version":3,"sources":["src/editor.js"],"names":["editor","document","getElementById","lineNumbers","querySelector","showEditorBtn","editorContainer","editorHeader","downloadBtn","updateLineNumbers","lines","value","split","innerHTML","map","_","index","join","addEventListener","scrollTop","updateEditorWithJointsData","window","jointsData","classList","add","style","display","e","target","remove","text","blob","Blob","type","a","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","ctrlKey","key","preventDefault","start","selectionStart","end","selectionEnd","startLine","substr","length","endLine","i","startsWith","isResizing","currentHandle","resizeHandles","querySelectorAll","forEach","handle","initResize","resize","stopResize","container","clientX","clientY","_container$getBoundin","getBoundingClientRect","left","top","width","height","contains","newWidth","Math","max","concat","newHeight","newTop","min","offsetTop","removeEventListener","formattedData","frame","angles","J1","J2","J3","J4","J5","J6","point","run","setupJointsDataProxy","handler","set","property","Array","isArray","Proxy","exportAndDownload","jsonData","groups","console","log","jsonString","JSON","stringify","downloadFile","workbook","XLSX","utils","book_new","jointsDataSheet","json_to_sheet","processJointsData","book_append_sheet","excelBuffer","write","bookType","processGroupsData","processedGroups","group","groupData","data","_i","_Object$entries","Object","entries","_Object$entries$_i","_slicedToArray","jointName","jointData","row","_objectSpread","group_name","name","joint_name","mappingData","push","processedFrame","time","_i2","_Object$entries2","_Object$entries2$_i","angle","content","fileName","mimeType","url","revokeObjectURL","fileInput","output","clearBtn","handleFileSelect","event","file","files","reader","FileReader","onload","parse","result","updateGroups","addFrameCard","error","textContent","message","onerror","readAsText"],"mappings":"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","file":"editor.0072d4cf.js","sourceRoot":"..","sourcesContent":["const editor = document.getElementById('editor');\r\nconst lineNumbers = document.querySelector('.line-numbers');\r\nconst showEditorBtn = document.getElementById('showEditor');\r\nconst editorContainer = document.getElementById('editorContainer');\r\nconst editorHeader = document.getElementById('editorHeader');\r\nconst downloadBtn = document.getElementById('code-download');\r\n\r\nfunction updateLineNumbers() {\r\n    const lines = editor.value.split('\\n');\r\n    lineNumbers.innerHTML = lines.map((_, index) => index + 1).join('<br>');\r\n}\r\n\r\neditor.addEventListener('input', updateLineNumbers);\r\neditor.addEventListener('scroll', () => {\r\n    lineNumbers.scrollTop = editor.scrollTop;\r\n});\r\n\r\nshowEditorBtn.addEventListener('click', () => {\r\n    updateEditorWithJointsData(window.jointsData);\r\n    editorContainer.classList.add('expanded');\r\n    showEditorBtn.style.display = 'none';\r\n});\r\n\r\neditorHeader.addEventListener('click', (e) => {\r\n    if (e.target === editorHeader) {\r\n        editorContainer.classList.remove('expanded');\r\n        showEditorBtn.style.display = 'block';\r\n    }\r\n});\r\n\r\ndownloadBtn.addEventListener('click', () => {\r\n    const text = editor.value;\r\n    const blob = new Blob([text], { type: 'text/plain' });\r\n    const a = document.createElement('a');\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = 'code.txt';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n});\r\n\r\neditor.addEventListener('keydown', function (e) {\r\n    if (e.ctrlKey && e.key === '/') {\r\n        e.preventDefault();\r\n        const start = this.selectionStart;\r\n        const end = this.selectionEnd;\r\n        const lines = this.value.split('\\n');\r\n        let startLine = this.value.substr(0, start).split('\\n').length - 1;\r\n        let endLine = this.value.substr(0, end).split('\\n').length - 1;\r\n\r\n        for (let i = startLine; i <= endLine; i++) {\r\n            if (lines[i].startsWith('// ')) {\r\n                lines[i] = lines[i].substr(3);\r\n            } else {\r\n                lines[i] = '// ' + lines[i];\r\n            }\r\n        }\r\n\r\n        this.value = lines.join('\\n');\r\n        updateLineNumbers();\r\n    }\r\n});\r\n\r\nlet isResizing = false;\r\nlet currentHandle = null;\r\n\r\nconst resizeHandles = document.querySelectorAll('.resize-handle');\r\n\r\nresizeHandles.forEach(handle => {\r\n    handle.addEventListener('mousedown', initResize);\r\n});\r\n\r\nfunction initResize(e) {\r\n    isResizing = true;\r\n    currentHandle = e.target.classList;\r\n    document.addEventListener('mousemove', resize);\r\n    document.addEventListener('mouseup', stopResize);\r\n    e.preventDefault();\r\n}\r\n\r\nfunction resize(e) {\r\n    if (!isResizing) return;\r\n\r\n    const container = editorContainer;\r\n    const { clientX, clientY } = e;\r\n    const { left, top, width, height } = container.getBoundingClientRect();\r\n\r\n    if (currentHandle.contains('right') || currentHandle.contains('corner')) {\r\n        const newWidth = Math.max(245, clientX - left);\r\n        container.style.width = `${newWidth}px`;\r\n    }\r\n\r\n    if (currentHandle.contains('top') || currentHandle.contains('corner')) {\r\n        const newHeight = Math.max(420, height - (clientY - top));\r\n        const newTop = Math.min(container.offsetTop + (clientY - top), container.offsetTop + height - 420);\r\n        container.style.height = `${newHeight}px`;\r\n        container.style.top = `${newTop}px`;\r\n    }\r\n\r\n    updateLineNumbers();\r\n}\r\n\r\nfunction stopResize() {\r\n    isResizing = false;\r\n    currentHandle = null;\r\n    document.removeEventListener('mousemove', resize);\r\n    document.removeEventListener('mouseup', stopResize);\r\n}\r\n\r\nupdateLineNumbers();\r\n\r\nfunction updateEditorWithJointsData(jointsData) {\r\n    if (jointsData.length > 0) {\r\n        const formattedData = jointsData.map((frame, index) => {\r\n            const angles = [\r\n                frame.angles.J1 || 0,\r\n                frame.angles.J2 || 0,\r\n                frame.angles.J3 || 0,\r\n                frame.angles.J4 || 0,\r\n                frame.angles.J5 || 0,\r\n                frame.angles.J6 || 0\r\n            ];\r\n\r\n            const point = `E6AXIS P${index}={A1 ${angles[0]},A2 ${angles[1]},A3 ${angles[2]},A4 ${angles[3]},A5 ${angles[4]},A6 ${angles[5]}}\\n`;\r\n            const run = `PTP P${index} CONT=60% Vel=100% Acc=100%`;\r\n            return point + run\r\n        }).join('\\n');\r\n\r\n        editor.value = formattedData;\r\n        updateLineNumbers();\r\n    }\r\n}\r\n\r\nfunction setupJointsDataProxy() {\r\n    const handler = {\r\n        set(target, property, value) {\r\n            target[property] = value;\r\n            if (Array.isArray(target)) {\r\n                updateEditorWithJointsData(target);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n\r\n    window.jointsData = new Proxy(window.jointsData || [], handler);\r\n}\r\n\r\nwindow.addEventListener('load', setupJointsDataProxy);\r\n\r\nfunction exportAndDownload() {\r\n    const jsonData = { groups, jointsData };\r\n    console.log(jointsData);\r\n    const jsonString = JSON.stringify(jsonData, null, 2);\r\n\r\n    // Download JSON\r\n    downloadFile(jsonString, 'generated_data.json', 'application/json');\r\n\r\n    // Download Excel\r\n    const workbook = XLSX.utils.book_new();\r\n    \r\n    // Process groups data\r\n    // const groupsSheet = XLSX.utils.json_to_sheet(processGroupsData(groups));\r\n    // XLSX.utils.book_append_sheet(workbook, groupsSheet, \"Groups\");\r\n    \r\n    // Process jointsData\r\n    const jointsDataSheet = XLSX.utils.json_to_sheet(processJointsData(jointsData));\r\n    XLSX.utils.book_append_sheet(workbook, jointsDataSheet, \"JointsData\");\r\n    \r\n    const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n    downloadFile(excelBuffer, 'generated_data.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\r\n}\r\n\r\nfunction processGroupsData(groups) {\r\n    const processedGroups = [];\r\n    groups.forEach(group => {\r\n        const groupData = group.data;\r\n        for (const [jointName, jointData] of Object.entries(groupData)) {\r\n            const row = {\r\n                group_name: group.name,\r\n                joint_name: jointName,\r\n                angles: jointData.angles,\r\n                ...jointData.mappingData\r\n            };\r\n            processedGroups.push(row);\r\n        }\r\n    });\r\n    return processedGroups;\r\n}\r\n\r\nfunction processJointsData(jointsData) {\r\n    return jointsData.map(frame => {\r\n        const processedFrame = {\r\n            time: frame.time,\r\n            group: frame.group\r\n        };\r\n        for (const [jointName, angle] of Object.entries(frame.angles)) {\r\n            processedFrame[`${jointName}`] = angle;\r\n        }\r\n        return processedFrame;\r\n    });\r\n}\r\n\r\nfunction downloadFile(content, fileName, mimeType) {\r\n    const blob = new Blob([content], { type: mimeType });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = fileName;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n}\r\n\r\n\r\n// Get references to the DOM elements\r\nconst fileInput = document.getElementById('fileInput');\r\nconst output = document.getElementById('output');\r\nconst clearBtn = document.querySelector(\".clearBtn\");\r\n\r\n// Add event listener for file selection\r\nfileInput.addEventListener('change', handleFileSelect);\r\nclearBtn.addEventListener('click', () => { fileInput.value = ''; });\r\n\r\nfunction handleFileSelect(event) {\r\n    const file = event.target.files[0];\r\n    \r\n    if (file) {\r\n        // Create a new FileReader instance\r\n        const reader = new FileReader();\r\n        \r\n        // Set up the FileReader onload event handler\r\n        reader.onload = function(e) {\r\n            try {\r\n                // Parse the file contents as JSON\r\n                const jsonData = JSON.parse(e.target.result);\r\n                \r\n                window.groups = jsonData.groups;\r\n                window.jointsData = jsonData.jointsData;\r\n                \r\n                window.updateGroups();\r\n                for (let i = 0; i < window.jointsData.length; i++) {\r\n                    window.addFrameCard(i);\r\n                }\r\n                // You can perform further operations with jsonData here\r\n                console.log('Successfully imported JSON data:', jsonData);\r\n            } catch (error) {\r\n                // Handle JSON parsing errors\r\n                output.textContent = 'Error parsing JSON: ' + error.message;\r\n                console.error('Error parsing JSON:', error);\r\n            }\r\n        };\r\n        \r\n        // Set up the FileReader onerror event handler\r\n        reader.onerror = function(e) {\r\n            output.textContent = 'Error reading file: ' + e.target.error;\r\n            console.error('Error reading file:', e.target.error);\r\n        };\r\n        \r\n        // Read the file as text\r\n        reader.readAsText(file);\r\n    } else {\r\n        output.textContent = 'No file selected';\r\n    }\r\n}\r\n\r\ndocument.getElementById('jsonEXBtn').addEventListener('click', exportAndDownload);"]}